import{u as S}from"./C-QmXMO2.js";import{i as c,y as m,C,D as E,_ as A,o as x,c as U,E as k,a as s,s as T,v as V,q as b}from"./C2egFmNW.js";const D={name:"AudioElement",props:{src:{type:String,required:!0},title:{type:String,default:"Unknown"},tooltipTitle:{type:String,default:"Change the volume by click, scroll or touch.",required:!1}},emits:["update:volume","update:loaded","update:playing","update:canplay"],setup(i,{emit:a}){const n=S(),e=c(null),o=c(1),u=()=>{if(e.value instanceof HTMLAudioElement){const l=e.value;l.muted=!0}},t=()=>{try{e.value instanceof HTMLAudioElement&&e.value?.play()}catch{}},r=()=>{e.value?.pause()},v=()=>n.playing,y=()=>{e.value&&(n.playing?e.value.play():e.value.pause())};m(()=>n.playing,l=>{l?t():(u(),r())}),m(()=>o.value,l=>{e.value&&a("update:volume",l)});const g=l=>{if(l.deltaY<0){const d=Math.min(1,o.value+.02);o.value=d}else{const d=Math.max(0,o.value-.02);o.value=d}},p=()=>{try{const l=window.location.origin+"/images/scenery/"+i.title.toLowerCase()+".jpg";e.value&&(e.value.controls=!0,navigator.mediaSession.metadata=new MediaMetadata({title:i.title,artist:"Mindboost",album:"Mindboost Originale",artwork:[{src:l,sizes:"192x192",type:"image/jpeg"}]}))}catch{}},f=l=>{l.code==="Space"&&(l.preventDefault(),console.log("play or pause: "+n.playing),n.playing=!n.playing)},h=()=>{a("update:playing",!0)},M=()=>{a("update:canplay",!0)},P=()=>{a("update:playing",!1)},w=()=>{i.title!=="Noise"&&p()};return C(()=>{e.value&&(e.value.src=i.src)}),E(()=>{e.value=null,o.value=0}),{audioElement:e,play:t,pause:r,isPlaying:v,handlePlay:h,handlePause:P,handleUpdatedMetadata:w,handleCanPlay:M,volume:o,togglePlayPause:y,changeVolumeOnWheel:g,handleKeyDown:f,updateMediaSession:p}}},L={class:"slider"},O=["title"];function W(i,a,n,e,o,u){return x(),U("div",null,[k(i.$slots,"default",{},void 0,!0),s("div",L,[T(s("input",{id:"gain-control","onUpdate:modelValue":a[0]||(a[0]=t=>e.volume=t),type:"range",min:"0",max:"1",step:"0.02","data-toggle":"tooltip","data-placement":"top",title:n.tooltipTitle,onWheel:a[1]||(a[1]=b((...t)=>e.changeVolumeOnWheel&&e.changeVolumeOnWheel(...t),["prevent"]))},null,40,O),[[V,e.volume]])]),s("audio",{ref:"audioElement",hidden:"",muted:"",loop:"",onPlay:a[2]||(a[2]=(...t)=>e.handlePlay&&e.handlePlay(...t)),onPause:a[3]||(a[3]=(...t)=>e.handlePause&&e.handlePause(...t)),onLoadedmetadata:a[4]||(a[4]=(...t)=>e.handleUpdatedMetadata&&e.handleUpdatedMetadata(...t)),onCanplay:a[5]||(a[5]=(...t)=>e.handleCanPlay&&e.handleCanPlay(...t))},null,544)])}const _=A(D,[["render",W],["__scopeId","data-v-c7f5891c"]]);export{_ as A};
