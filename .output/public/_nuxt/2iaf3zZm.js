import{j as f,i as v,o as a,c as i,a as t,s as U,v as E,F as y,a6 as g,f as $,a8 as r,t as n,a2 as w}from"./C2egFmNW.js";const j={class:"row justify-content-center mt-5"},P={class:"col-12 my-4 col-sm-8"},A={class:"row g-3"},B={class:"col-md-9"},G=t("label",{for:"inputPassword2",class:"visually-hidden"},"Email address",-1),F={class:"card col-12 col-sm-8 mt-4"},L=t("div",{class:"card-header"},[t("h6",null,"Team Members")],-1),N={class:"card-body"},V={class:"table-responsive"},z={class:"table table-bordered"},H=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"#"),t("th",{scope:"col"},"Email"),t("th",{scope:"col"},"Status"),t("th",{scope:"col"},"Invitation Date"),t("th",{scope:"col"},"Invitation Date")])],-1),R={key:0},q=t("td",{colspan:"11",class:"text-center"}," No Cancelled Subscriptions available ",-1),J=[q],K={scope:"row"},O=["onClick"],Q={class:"card col-12 col-sm-8 mt-4"},W=t("div",{class:"card-header"},[t("h6",null,"Invited Users")],-1),X={class:"card-body"},Y={class:"table-responsive"},Z={class:"table table-bordered"},M=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"#"),t("th",{scope:"col"},"Email"),t("th",{scope:"col"},"Status"),t("th",{scope:"col"},"Invitation Date"),t("th",{scope:"col"},"Action")])],-1),tt={key:0},et=t("td",{colspan:"5",class:"text-center"}," Pending invited users not found ",-1),st=[et],ot={scope:"row"},nt=["onClick"],lt={__name:"invited-user",setup(at){const c=$().public.apiUrl,d=f(),k=f(),u=v(""),l=v([]),_=v([]);async function x(){if(u.value)try{await r.post(`${c}/invitations/send`,{email:u.value,inviter_id:k.user.id}),Swal.fire({title:"Good job!",text:"Invitation email is sent successfully",icon:"success"}),setTimeout(()=>location.reload(),2e3)}catch(e){e.response&&e.response.status===409?Swal.fire({title:"Already Invited",text:"This user has already been invited.",icon:"warning"}):Swal.fire({title:"Error!",text:"There was an issue sending the invitation. Please try again.",icon:"error"})}}async function S(){try{const e=await r.post(`${c}/invited-users`,{inviter_id:d.user.id});l.value=e.data.data||[]}catch{}}async function C(){try{const e=await r.post(`${c}/team-members`,{inviter_id:d.user.id});_.value=e.data.data}catch(e){console.log(e)}}async function D(e){try{const o=await r.post(`${c}/cancel-invitation`,{inviter_id:d.user.id,user_id:e});Swal.fire({title:"Good job!",text:"Invitation canceled successfully.",icon:"success"}),setTimeout(()=>location.reload(),2e3)}catch(o){console.error("Error fetching subscriptions:",o)}getStatusClass()}async function I(e){try{const o=await r.post(`${c}/delete-invitation`,{inviter_id:d.user.id,user_id:e});Swal.fire({title:"Good job!",text:"Invitation deleted successfully.",icon:"success"}),l.value=l.value.filter(s=>s.user_id!==e),setTimeout(()=>location.reload(),2e3)}catch{}}S(),C();function p(e){return{badge:!0,"bg-warning":e===0,"bg-success":e===1}}function b(e){return e===0?"Pending":"Active"}function m(e){const o={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(e).toLocaleDateString(void 0,o)}return(e,o)=>(a(),i("div",j,[t("div",P,[t("div",A,[t("div",B,[G,U(t("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>u.value=s),type:"text",class:"form-control",name:"email",placeholder:"Enter email","aria-describedby":"emailHelp"},null,512),[[E,u.value]])]),t("div",{class:"col-md-2"},[t("button",{class:"btn btn-primary btn-sm",onClick:x}," Invite User ")])])]),t("div",F,[L,t("div",N,[t("div",V,[t("table",z,[H,t("tbody",null,[_.value.length===0?(a(),i("tr",R,J)):(a(!0),i(y,{key:1},g(_.value,(s,h)=>(a(),i("tr",{key:s.id},[t("th",K,n(h+1),1),t("td",null,n(s.email),1),t("td",null,[t("span",{class:w(p(s.status))},n(b(s.status)),3)]),t("td",null,n(m(s.created_at)),1),t("td",null,[t("button",{class:"btn btn-danger btn-sm",onClick:T=>D(s.user_id)}," Cancel Invitation ",8,O)])]))),128))])])])])]),t("div",Q,[W,t("div",X,[t("div",Y,[t("table",Z,[M,t("tbody",null,[l.value.length===0?(a(),i("tr",tt,st)):(a(!0),i(y,{key:1},g(l.value,(s,h)=>(a(),i("tr",{key:s.id},[t("th",ot,n(h+1),1),t("td",null,n(s.email),1),t("td",null,[t("span",{class:w(p(s.status))},n(b(s.status)),3)]),t("td",null,n(m(s.created_at)),1),t("td",null,[t("button",{class:"btn btn-danger btn-sm",onClick:T=>I(s.user_id)}," Delete Invitation ",8,nt)])]))),128))])])])])])]))}};export{lt as default};
