import{j as b,i as S,o as n,c as o,a as t,F as l,a6 as v,f as C,a8 as _,t as s,d as i,a2 as k}from"./C2egFmNW.js";const w={class:"row justify-content-center mt-5"},x={class:"col-12 col-sm-8"},D={class:"table table-bordered"},$=t("thead",null,[t("tr",null,[t("th",{scope:"col"}," # "),t("th",{scope:"col"}," Subscription Name "),t("th",{scope:"col"}," Duration "),t("th",{scope:"col"}," Payment Method "),t("th",{scope:"col"}," Payment Type "),t("th",{scope:"col"}," Subscription Qty "),t("th",{scope:"col"}," Price "),t("th",{scope:"col"}," Status "),t("th",{scope:"col"}," Purchase Date "),t("th",{scope:"col"}," Expiry Date "),t("th",{scope:"col"}," Action ")])],-1),B={scope:"row"},P=t("i",{class:"fas fa-credit-card"},null,-1),L=t("i",{class:"fas fa-university"},null,-1),N=["onClick"],E={__name:"subscription",setup(U){const u=b(),d=C().public.apiUrl,r=S([]);async function h(){try{const a=await _.post(`${d}/user-active-subscriptions`,{email:u.user.email});r.value=a.data.data}catch{}}function p(a){const c={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(a).toLocaleDateString(void 0,c)}h();async function m(a){try{const c=await _.post(`${d}/cancel-subscriptions`,{email:u.user.email,subscription_id:a});r.value=c.data.data,Swal.fire({title:"Subscription Cancel!",text:"Your Subscriptions is Canceled.",icon:"success"})}catch{this.$toast.error("Oops, something went wrong!")}}function y(a){return a===1?"Active":"Cancelled"}function f(a){return a==="0"?"badge bg-warning":"badge bg-success"}return(a,c)=>(n(),o("div",null,[t("div",w,[t("div",x,[t("table",D,[$,t("tbody",null,[(n(!0),o(l,null,v(r.value,(e,g)=>(n(),o("tr",{key:e.id},[t("th",B,s(g+1),1),t("td",null,s(e.product_name),1),t("td",null,s(e.product_billing_frequency)+" "+s(e.product_billing_interval),1),e.payment_method==="card"?(n(),o(l,{key:0},[P,i(" Card ")],64)):e.payment_method==="bank"?(n(),o(l,{key:1},[L,i(" Bank ")],64)):(n(),o(l,{key:2},[i(s(e.payment_method),1)],64)),t("td",null,s(e.payment_type),1),t("td",null,s(e.product_quantity),1),t("td",null,"$"+s(e.product_price),1),t("td",null,[t("span",{class:k(f(e.status))},s(y(e.status)),3)]),t("td",null,s(p(e.purchasing_date)),1),t("td",null,s(p(e.expiry_date)),1),t("td",null,[t("button",{class:"btn btn-danger",onClick:q=>m(e.subscription_id)}," Cancel ",8,N)])]))),128))])])])])]))}};export{E as default};
