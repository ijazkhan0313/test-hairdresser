import{a3 as i}from"./C2egFmNW.js";import{u as t}from"./C-QmXMO2.js";const c=i("microphone",{state:()=>({microphone:null}),actions:{async getMicrophone(){if(this.microphone&&this.microphone.microphoneNode&&this.microphone.microphoneStream)return this.microphone;const e=await this.getMediaStream(),o=(await t().getAudioContext()).createMediaStreamSource(e);return t().addNode("microphone",o),this.microphone={microphoneNode:o,microphoneStream:e},this.microphone},async getMediaStream(){const e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1},video:!1});return e.addEventListener("removetrack",()=>{this.detachMicrophoneSource()}),e},detachMicrophoneSource(){this.microphone?.microphoneStream.getTracks().forEach(e=>e.stop()),this.microphone=null}}});export{c as u};
