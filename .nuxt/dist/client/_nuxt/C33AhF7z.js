import{_ as f,u as _,h as I,m as b,k as x,o as d,c as r,a as t,t as c,s as h,a9 as p,F as v,a6 as m,q as g,j as D}from"./C2egFmNW.js";const O={setup(){const{t:s}=_(),e=I();return{t:s,localePath:e}},data(){return{bar_val:100,form:{soundscape:""},audioInputDevices:[],audioOutputDevices:[],selectedInput:null,selectedOutput:null,stream:null}},computed:{...b(D,["audioInputDevice","audioOutputDevice"])},created(){try{this.getUserMedia().then(()=>{navigator.mediaDevices.enumerateDevices().then(s=>{this.audioInputDevices=s.filter(e=>e.kind==="audioinput"),this.audioOutputDevices=s.filter(e=>e.kind==="audiooutput"),this.selectedDevice=this.audioInputDevices.length>0?this.audioInputDevices[0].deviceId:null,this.selectedInput=this.audioInputDevices.findIndex(e=>e.deviceId===this.audioInputDevice.deviceId),this.selectedOutput=this.audioOutputDevices.findIndex(e=>e.deviceId===this.audioOutputDevice.deviceId),this.selectedInput<0&&(this.selectedInput=0),this.selectedOutput<0&&(this.selectedOutput=0),this.checkIfSameDevice()&&this.$toast.warning(this.t("bluetoothWarning"),{duration:6e3,pauseOnHover:!0,dismissible:!0,queue:!0,position:"bottom-left"})})})}catch(s){this.$toast.error("Error enumerating media devices: ",s)}},methods:{...x(D,["saveInputdevice","saveOutputDevice"]),normalizeDeviceName(s){return s.replace("Standard - ","").replace(/ \(.*\)$/,"").trim()},checkIfSameDevice(){const s=this.audioOutputDevices[this.selectedOutput]||this.audioOutputDevices[this.index],l=this.audioInputDevices[this.selectedInput].label,o=s.label;if(!l||!o)throw new Error("Device labels are not selected or not available");const n=this.normalizeDeviceName(l),a=this.normalizeDeviceName(o);return n===a},saveDevices(){this.saveInputdevice(this.audioInputDevices[this.selectedInput]),this.saveOutputDevice(this.audioOutputDevices[this.selectedOutput]),this.$router.push(this.localePath("/onboarding"))},getUserMedia(){const s={audio:{deviceId:this.selectedDevice?{exact:this.selectedDevice}:void 0}};try{return navigator.mediaDevices.getUserMedia(s)}catch(e){this.$toast.error("Error accessing media devices: ",e)}}},saveSetting(s){this.form.soundscape=s,this.$axios.post("/api/update-setting",this.form).then(({data:e})=>{this.$toast.success(e),e.success&&(this.$toast.success("Success!"),this.$router.push(this.localePath("onboarding")))}).catch(()=>{this.$toast.error("something went wrong while saving...")})}},w={class:"row"},y={class:"col-12"},k={class:"text-center fw-bold pt-5"},S={class:"text-center mb-0 pb-0 text-muted"},z={class:"text-center mt-0 pt-0 text-muted"},M={class:"row justify-content-center"},U={class:"col-11 pt-md-4"},j={class:"row justify-content-center"},N={class:"col-md-3 text-center"},E={class:"pb-0 mb-0"},L={class:"pt-0 mt-0 text-muted pb-0 mb-0",style:{"font-size":"14px","font-weight":"500"}},P=["value"],q={class:"row justify-content-center pt-3"},B={class:"col-md-3 text-center"},C={class:"pb-0 mb-0"},V={class:"pt-0 mt-0 text-muted pb-0 mb-0",style:{"font-size":"14px","font-weight":"500"}},A=["value"],F={class:"row justify-content-center pt-3"},H={class:"col-md-3 text-center",style:{"z-index":"1000000"}};function T(s,e,l,o,n,a){return d(),r("div",null,[t("div",w,[t("div",y,[t("h4",k,c(o.t("How is your audio hardware connected?")),1),t("p",S,c(o.t("As input, please select the microphone of your laptop, webcam or mobile device â€“ not of your headphones.")),1),t("p",z,c(o.t("To use Mindboost, headphones are required.")),1)])]),t("div",M,[t("div",U,[t("form",null,[t("div",j,[t("div",N,[t("h6",E,c(o.t("Input device:")),1),t("p",L," ("+c(o.t("select laptop or mobile device microphone"))+") ",1),h(t("select",{"onUpdate:modelValue":e[0]||(e[0]=i=>n.selectedInput=i),class:"form-select pt-1 mt-0 select-box",onChange:e[1]||(e[1]=(...i)=>a.checkIfSameDevice&&a.checkIfSameDevice(...i))},[(d(!0),r(v,null,m(n.audioInputDevices,(i,u)=>(d(),r("option",{key:u,value:u},c(i.label),9,P))),128))],544),[[p,n.selectedInput]])])]),t("div",q,[t("div",B,[t("h6",C,c(o.t("Output device:")),1),t("p",V,c(o.t("select headphones or headphone output")),1),h(t("select",{"onUpdate:modelValue":e[2]||(e[2]=i=>n.selectedOutput=i),class:"form-select pt-1 mt-0 select-box",onChange:e[3]||(e[3]=(...i)=>a.checkIfSameDevice&&a.checkIfSameDevice(...i))},[(d(!0),r(v,null,m(n.audioOutputDevices,(i,u)=>(d(),r("option",{key:u,value:u},c(i.label),9,A))),128))],544),[[p,n.selectedOutput]])])]),t("div",F,[t("div",H,[t("a",{href:"#",style:{"z-index":"1000000"},class:"btn col-4 next-btn",onClick:e[4]||(e[4]=g((...i)=>a.saveDevices&&a.saveDevices(...i),["prevent"]))},c(o.t("Next")),1)])])])])])])}const G=f(O,[["render",T],["__scopeId","data-v-bf3ddc39"]]);export{G as default};
